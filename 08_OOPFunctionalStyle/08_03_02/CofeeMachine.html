<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
</head>

<body>
  <script>
    function CoffeeMachine(power, capacity) {
      this.waterAmount = 0;

      var WATER_HEAT_CAPACITY = 4200;
      var timeId = 0;

      var self = this;

      function getBoilTime() {
        return self.waterAmount * WATER_HEAT_CAPACITY * 80 / power;
      }

      function onReady() {
        alert('Кофе готово!');
      }

      this.run = function() {
        timeId = setTimeout(onReady, getBoilTime());
      };

      this.stop = function() {
        clearTimeout(timeId);
      };
      this.setWaterAmount = function(amount) {
        if (amount < 0) {
          throw new Error("Значение должно быть положительным");
        }
        if (amount > capacity) {
          throw new Error("Нельзя залить воды больше, чем " + capacity);
        }

        waterAmount = amount;
      };

      this.getWaterAmount = function() {
        return waterAmount;
      };
      this.getPower = function() {
        return power;
      };
    }
  </script>
</body>

</html>